# 점과 벡터

> 점과 직교 좌표계
* 점: n차원 공간에서의 위치
* 직교좌표계: 서로 직교하는 축을 이용해 공간상에 위치를 표시하는 일반적인 좌표계
* 기타 좌표계
    * 원통 좌표계: 높이(h)와 h에 수직인 반지름 축(r), 수평각도(th)
    * 구면 좌표계: 수직각도(pi), 수평각도(th), 반지름(r)
* 당면한 문제를 제일 잘 나타내느 좌표계를 골라서 사용하면 좋다
    * 주인공 캐릭터를 원통 모양으로 회전하는 애니메이션에 원통 좌표계가 유용

> 왼손 좌표계 & 오른손 좌표계
* 삼차원 직교좌표계에서 서로 직교하는 세 축을 표현하는 두가지 방법
* z축을 양의 방향으로 감싸쥐는 손이 무엇이냐에 따라 x, y순서가 바뀐다.
    * y축이 머리위, x축이 오른쪽을 가리킬 때, z축이 다가오는 방향이면 오른손, 아니면 왼손
    * 두 축을 고정했을때 다른 한 축의 방향이 서로 반대
* 계산 규칙에 영향을 주지 않고, 계산된 숫자에 대한 해석, 시각적 표현만 달라진다. (외적 빼고)
* 어떤 걸 선택할 거냐는 프로그래머의 마음이다. 일관적으로 사용하는게 중요하다.
* 3D 그래픽 플머는 왼손좌표계를 많이쓴다. 카메라 기준 y 위, x 오른쪽, z 멀어지는 깊이(z-buffer)

> 벡터
* 벡터: n 차원 공간에서 크기와 방향을 나타내는 값, 방향이 있는 선
* 스칼라: 방향은 없고 크기만 있다.
* 점은 절대적 위치, 벡터는 상대적 차이
    * 벡터의 꼬리를 좌표계의 원점에 두면 벡터는 위치벡터로 기능
    * 동차 좌표계에서 점과 벡터는 서로 다르게 취급된다. [x, y, z, 0 or 1]
* 기저 백터: 직교 좌표계의 각 축 방향인 단위 벡터
    * 3차원의 단위벡터는 보통 [i, j, k] 로 표현한다.
    * 모든 점과 벡터는 기저 벡터의 스칼라 곱의 합으로 표현 할 수 있다.

> 벡터 연산
* 스칼라 값과의 곱
    * v = [x, y, z];
    * v * s(스칼라) == [sx, sy, sz];
    * 크기는 증가하고 방향은 그대로 (음수인 경우 방향이 반대로)
    * 불균등 스케일 값을 곱하는 경우는 아다마르 곱셈이라고 표현 [s1*x, s2*y, s3*z]
    * 3x3 스케일 행렬 연산으로 표현할 수 있다.
* 벡터간 덧셈 뺄셈
    * v1 = [x1, y1, z1];
    * v2 = [x2, y2, z2];
    * v1 + v2 == [x1 + x2, y1 + y2, z1 + z2];
    * v1 - v2 == [x1 - x2, y1 - y2, z1 - z2];
    * 벡터의 합은 좌항의 머리에 우항의 꼬리를 가져다 놓은 모양을 상상하면 된다.
* 벡터와 점의 덧셈 뺄셈
    * 점 + 벡터 = 다른 점
    * 점 - 점 = 벡터
    * 점 + 점 = undefined
* 벡터의 크기 |v|
    * v = [x, y]
    * |v| == sqrt(x^2 + y^2);
* 벡터 연산의 활용
    * 명시적 오일러 적분
        * p = 캐릭터의 현재 위치 (점)
        * v = 캐릭터의 현재 속도 (벡터)
        * 다음 프레임의 캐릭터의 위치 = p + v * deltaTime
    * 구의 교차 체크
        * 구의 중심 (점) c1, c2
        * 구의 반지름 (스칼라) r1, r2
        * 중심간의 방향 벡터 d = c1 - c2
        * 구의 교차 == |d| < r1 + r2
* 정규화(normalize)와 단위 벡터(unit vector)
    * 단위 벡터(u): 크기가 1인 벡터
    * 3d 수리 연산과 게임 프로그래밍에서 중요하게 사용된다.
    * 정규화: 벡터를 단위 벡터로 만드는 것
    * u = v / |v|
* 법선 벡터 (normal vector)
    * 평면에 수직인 벡터
    * 3d 수리 연산과 게임 프로그래밍에서 유용하게 사용된다.
    * 한 점과 법선 벡터로 평면을 정의 할 수 있다.
    * 면과 면에 비치는 상대적 각도를 계산하는데 자주 사용된다.
* 내적(dot product)
    * 연산 결과가 스칼라 값
    * v1 * v2 == x1 * x2 + y1 * y2 + z1 * z2;
    * v1 * v2 == |v1| * |v2| * cos(두 벡터가 이루는 각도)
    * v1 * v2 == v2 * v1 (교환 법칙)
    * v1 * (v2 + v3) == v1 * v2 + v1 * v3 (분배 법칙)
    * s(스칼라) * v1 * v2 == v1 * s * v2 == s * (v1 * v2)
* 내적 응용
    * 단위 벡터(u)와 임의의 벡터(v)의 내적은 v를 u의 연장선상으로 투영한 크기가 된다.
    * 벡터 크기 구하기 
        * v * v == |v| * |v| * cos(0) == |v|^2
    * 두 벡터의 관계
        * 평행인 같은 방향 벡터 a * b == |a| * |b|
        * 평행인 다른 방향 벡터 a * b == -1 * |a| * |b|
        * 수직인 벡터 a * b == 0
        * 두 벡터가 이루는 각이 90도 미만 a * b > 0
        * 두 벡터가 이루는 각이 90도 이상 a * b < 0
    * 게임에서 활용
        * 적이 플레이어의 앞에 있는지 확인하고 싶을 때
            * 플레이어의 위치 p
            * 적의 위치 e
            * 플레이어의 방향 벡터 v
            * 앞에 있는가? == v * (e - p) > 0
        * 평면과 점의 사이의 거리
            * 평면 위의 점 q, 평면의 법선 단위 벡터 n
            * 임의의 점 p
            * 평면과 점 사이의 거리(h) == (p - q) * v
* 외적(cross product)
    * 연산 결과가 벡터
    * v1 x v2 = [(y1*z1 - z1*y2), (z1*x1 - x1*y2), (x1*y2 - y1*x2)]
    * |v1 x v2| = |v1| * |v2| * sin(두 벡터가 이루는 각도)
    * 외적의 크기는 v1, v2를 두변으로 하는 평행 사변형의 크기와 같다
    * p1, p2, p3 세점으로 구성된 삼각형의 넓이 == 두 변으로 이뤄진 두 벡터 외적의 크기 / 2
    * 외적의 방향은 왼손 / 오른손 좌표계에서 두 벡터를 순서대로 감싸쥔 엄지의 방향
    * v1 x v2 != v2 x v1
    * v1 x v2 == (-1 * v2) x v1
    * v1 x (v2 + v3) == (v1 x v2) + (v1 x v3)
    * (s * v1) x v2 == v1 x (s * v2) = s * (v1 x v2)
    * 직교 좌표계의 축간의 외적은 좌표계의 축에 대한 양의 회전 방향을 정의한다.
        * i x j == k, j x k == i, k x i == j
        * z축에서 양의 회전은 x축에서는 y방향 ...
* 외적의 활용
    * 두 벡터의 수직인 벡터를 찾을때 외적을 사용
    * 어떤 로컬 기저 좌표 벡터의 두 값을 알고 있을 때 나머지 하나를 구하는데 사용
        * 위, 오른쪽 알면 진행 방향을 구할 수 있음
    * 삼각형이나 평면의 단위 법선 벡터를 구할때도 사용
    * 토크 계산할 때 사용
        * 가해진 힘 F
        * 물체의 무게 중심으로부터 힘이 가해진 점 사이의 거리 R
        * 토크 == R x F
* Linear Interpolation (LERP)
    * 두 지점 사이에서 0 ~ 1로 보간한 위치 계산
        * 점 A, B
        * 보간 값 x (0~1)
        * 보간 위치 p == (1 - x)*A + x*B









    
